{% extends "base.html" %}

{% block content %}
<h2>Etapas de Crianza</h2>

<form method="GET" class="row g-3 mb-4">
    <div class="col-md-4">
        <input type="text" name="vessel_type" placeholder="Tipo de recipiente" value="{{ current_filter_vessel }}" class="form-control">
    </div>
    <div class="col-md-4">
        <input type="text" name="location" placeholder="Ubicación" value="{{ current_filter_location }}" class="form-control">
    </div>
    <div class="col-md-4">
        <button type="submit" class="btn btn-secondary">Filtrar</button>
        <a href="{{ url_for('aging.get_aging_stages') }}" class="btn btn-outline-secondary">Limpiar</a>
    </div>
</form>

<a href="{{ url_for('aging.add_aging_stage') }}" class="btn btn-primary mb-3">+ Nueva Etapa</a>

<table class="table table-hover">
    <thead>
        <tr>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Recipiente</th>
            <th>Volumen</th>
            <th>Identificador</th>
            <th>Ubicación</th>
            <th>Observaciones</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for stage in stages %}
        <tr>
            <td>{{ stage.aging_start_date }}</td>
            <td>{{ stage.aging_end_date }}</td>
            <td>{{ stage.vessel_type }}</td>
            <td>{{ stage.volume_liters }} L</td>
            <td>{{ stage.vessel_identifier }}</td>
            <td>{{ stage.location }}</td>
            <td>{{ stage.observations }}</td>
            <td>
                <a href="{{ url_for('aging.edit_aging_stage', id=stage.id) }}" class="btn btn-sm btn-warning">Editar</a>
                <form action="{{ url_for('aging.delete_aging_stage', id=stage.id) }}" method="POST" class="d-inline">
                    <button type="submit" class="btn btn-sm btn-danger">Eliminar</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
